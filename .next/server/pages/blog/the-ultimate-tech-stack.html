<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Choosing a tech stack for my personal dev blog in 2020</title><meta name="copyright" content="Colin McDonnell"/><link rel="canonical" href="https://vriad.com/essays/devii"/><meta property="og:type" content="website"/><meta name="og:title" property="og:title" content="Choosing a tech stack for my personal dev blog in 2020"/><meta property="og:site_name" content="dev.lwlx.xyz"/><meta property="og:url" content="https://vriad.com/essays/devii"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Choosing a tech stack for my personal dev blog in 2020"/><meta name="twitter:site" content="@lwlx"/><meta name="twitter:creator" content="@lwlx"/><meta name="twitter:image" content="/pancakes.jpeg"/><meta property="og:image" content="/pancakes.jpeg"/><meta name="next-head-count" content="15"/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-7574b5f2560487b662c2.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4cb66147a9c8c0fd8872.js" as="script"/><link rel="preload" href="/_next/static/chunks/ac5da378b4ecd4a38d3f62a9e50ea23347a0e932.b1e9d5f6f84b74cfdc79.js" as="script"/><link rel="preload" href="/_next/static/chunks/f6078781a05fe1bcb0902d23dbbb2662c8d200b3.4f74c9488847d06a0cf9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-1961519019159f928e8c.js" as="script"/><link rel="preload" href="/_next/static/chunks/c1dbd67d6d9c688ae4d7fa2d396d98e2a73eef47.12c1b7bd805dd74f5963.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bblog%5D-a06e06ab2fd3f06709f2.js" as="script"/><style id="__jsx-516165434">.devii-markdown p,.devii-markdown li{line-height:1.7;color:#333;}.devii-markdown h1,.devii-markdown h2,.devii-markdown h3,.devii-markdown h4,.devii-markdown h5,.devii-markdown h6{margin:0px;padding:0px;}.devii-markdown h1>a,.devii-markdown h2>a,.devii-markdown h3>a,.devii-markdown h4>a,.devii-markdown h5>a,.devii-markdown h6>a{-webkit-text-decoration:none;text-decoration:none;}.devii-markdown hr{margin:20px 0px;opacity:0.35;}.devii-markdown h1{padding-top:30px;padding-bottom:10px;margin-top:30px;margin-bottom:30px;}.devii-markdown h2{padding-top:25px;padding-bottom:10px;margin-top:25px;margin-bottom:25px;}.devii-markdown h3{padding-top:20px;padding-bottom:10px;margin-top:20px;margin-bottom:20px;}.devii-markdown h4{padding-top:15px;padding-bottom:10px;margin-top:15px;margin-bottom:15px;}.devii-markdown h5{padding-top:10px;padding-bottom:10px;margin-top:10px;margin-bottom:10px;}.devii-markdown h6{padding-top:5px;padding-bottom:10px;margin-top:5px;margin-bottom:5px;}.devii-markdown p{padding:10px 0px;margin:10px 0px;}.devii-markdown li{padding:10px 0px;}.devii-markdown img{width:100%;border-radius:8px;box-shadow:0px 4px 30px #00000040;}.devii-markdown code{background-color:#00000010;padding:3px 3px;border-radius:2px;}.devii-markdown pre{margin:20px 0px !important;}.devii-markdown ol pre,.devii-markdown ol p{margin:0px 0px !important;}.devii-markdown blockquote{margin:0px;padding-left:1em;border-left:4px solid #4E5C63;}</style><style id="__jsx-2179548495">html,body,#__next{min-height:100%;padding:0;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto, Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue, sans-serif;}*{box-sizing:border-box;}</style></head><body><div id="__next"><div style="display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh" class="jsx-2179548495"><div style="top:0;width:100%;height:50px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;background-color:#4E5C63;padding:30px;font-size:12pt"><a href="/" style="text-decoration:none"><p style="color:white">dev.lwlx.xyz</p></a><div style="flex:1"></div><a href="https://github.com/Lawlez/dev.lwlx.xyz" style="text-decoration:none"><p style="padding:0px 1em;color:white">GitHub</p></a><a href="/blog/the-ultimate-tech-stack" style="text-decoration:none"><p style="padding:0px 1em;color:white">Motivation</p></a></div><div style="display:flex;flex-direction:row;justify-content:center;width:100%;padding:0px 0px 100px 0px"><div style="width:100%;max-width:960px"><img style="width:100%;max-width:100%;margin:0px" src="/pancakes.jpeg"/><div style="padding:50px 3vw 50px 3vw"><h1 style="margin:10px 0px 10px 0px;padding:0;border:none">Choosing a tech stack for my personal dev blog in 2020</h1><hr style="height:1px;color:#eee;opacity:0.2;margin:25px 0px"/><div style="margin:0px;padding:0px"><div style="display:flex;flex-direction:row;align-items:center;justify-content:flex-start"><img src="/profile.jpg" style="width:70px;height:70px;border-radius:35px;margin:0px 10px 0px 0px"/><div><p style="margin:2px;padding:0;line-height:1.2;font-size:11pt">Colin McDonnell</p><p style="opacity:0.6;margin:2px;padding:0;line-height:1.2;font-size:11pt">May 26th, 2020</p><p style="margin:2px;padding:0;line-height:1.2;font-size:11pt"><a style="text-decoration:none;color:#3b9488" href="https://twitter.com/vriad">@vriad</a></p></div></div></div></div><div style="width:100%;padding:0px 3vw"><div style="width:100%" class="jsx-516165434 devii-markdown"><blockquote><p>Originally published at <a href="https://vriad.com/essays/devii">https://vriad.com/essays/devii</a>. Check out the HN <del>roast</del> discussion <a href="https://news.ycombinator.com/item?id=23309002">here</a>! 🤗</p></blockquote><p>I recently set out to build my personal website — the one you&#x27;re reading now, as it happens!</p><p>Surprisingly, it was much harder than expected to put together a &quot;tech stack&quot; that met my criteria. My criteria are pretty straightforward; I would expect most React devs to have a similar list. Yet it was surprisingly hard to put all these pieces together.</p><p>Given the lack of a decent out-of-the-box solution, I worry that many developers are settling for static-site generators that place limits on the interactivity and flexibility of your website. We can do better.</p><blockquote><p>Clone the repo here to get started with this setup: <a href="https://github.com/Lawlez/dev.lwlx.xyz">https://github.com/Lawlez/dev.lwlx.xyz</a></p></blockquote><p>Let&#x27;s quickly run through my list of design goals:</p><h3>React (+ TypeScript)</h3><p>I want to build the site with React and TypeScript. I love them both wholeheartedly, I use them for my day job, and they&#x27;re gonna be around for a long time. Plus writing untyped JS makes me feel dirty.</p><p>I don&#x27;t want limitations on what my personal website can be/become. Sure, at present my site consists of two simple, static blog posts. But down the road, I may want to build a page that contains an interactive visualization, a filterable table, or a demo of a React component I&#x27;m open-sourcing. Even something simple (like the email newsletter signup form at the bottom of this page) was much more pleasant to implement in React; how did we use to build forms again?</p><p>Plus: I want access to the npm ecosystem and all my favorite UI, animation, and styling libraries. I sincerely hope I never write another line of raw CSS ever again; CSS-in-JS 4 lyfe baby. If you want to start a Twitter feud with me about this, by all means <a href="https://twitter.com/vriad">at me</a>.</p><h3>Good authoring experience</h3><p>If it&#x27;s obnoxious to write new blog posts, I won&#x27;t do it. That&#x27;s a regrettable law of the universe. Even writing blog posts with plain HTML — just a bunch of <code>&lt;p&gt;</code> tags in a div — is just annoying enough to bug me. The answer: Markdown of course!</p><p>Static site generators (SSGs) like Hugo and Jekyll provide an undeniably wonderful authoring experience. All you have to do is <code>touch</code> a new .md file in the proper directory and get to writing. Unfortunately all Markdown-based SSGs I know of are too restrictive. Mixing React and Markdown on the same page is either impossible or tricky. If it&#x27;s possible, it likely requires some plugin/module/extension, config file, blob of boilerplate, or egregious hack. Sorry Hugo, I&#x27;m not going to re-write my React code using <code>React.createElement</code> like it&#x27;s 2015.</p><p>Well, that doesn&#x27;t work for me. I want my website to be React-first, with a sprinkling of Markdown when it makes my life easier.</p><h3>Static generation</h3><p>As much as I love the Jamstack, it doesn&#x27;t cut it from an SEO perspective. Many blogs powered by a &quot;headless CMS&quot; require two round trips before rendering the blog content (one to fetch the static JS bundle and another to fetch the blog content from a CMS). This degrades page load speeds and user experience, which accordingly degrades your rankings on Google.</p><p>Instead I want every page of my site to be pre-rendered to a set of fully static assets, so I can deploy them to a CDN and get fast page loads everywhere. You could get the same benefits with server-side rendering, but that requires an actual server and worldwide load balancing to achieve comparable page load speeds. I love overengineering things as much as the next guy, even I have a line. 😅</p><h2>My solution</h2><p>I describe my final architecture design below, along with my rationale for each choice. I distilled this setup into a website starter/boilerplate available here: <a href="https://github.com/Lawlez/dev.lwlx.xyz">https://github.com/Lawlez/dev.lwlx.xyz</a>. Below, I allude to certain files/functions I implemented; to see the source code of these, just clone the repo <code>git clone git@github.com:vriad/devii.git</code></p><h3>Next.js</h3><p>I chose to build my site with Next.js. This won&#x27;t be a surprising decision to anyone who&#x27;s played with statically-rendered or server-side rendered React in recent years. Next.js is quickly eating everyone else&#x27;s lunch in this market, especially Gatsby&#x27;s (sorry Gatsby fans).</p><p>Next.js is by far the most elegant way (for now) to do any static generation or server-side rendering with React. They just released their next-generation (pun intended) static site generator in the <a href="https://nextjs.org/blog/next-9-3">9.3 release</a> back in March. So in the spirit of using technologies <a href="https://www.youtube.com/watch?v=eBAX8MbRYFA">in the spring of their life</a>, Next.js is a no-brainer.</p><p>Here&#x27;s a quick breakdown of the project structure. No need to understand every piece of it; but it may be useful to refer to throughout the rest of this post.</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#a9b7c6">.</span>
<span class="token property-access">├──</span> <span class="token" style="color:#9876aa">README</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">md</span>
├── <span class="token" style="color:#cc7832">public</span> <span class="token" style="color:#808080">// all static files (images, etc) go here</span>
├── pages <span class="token" style="color:#808080">// every .tsx component in this dir becomes a page of the final site</span>
<span class="token" style="color:#a9b7c6">|</span>   ├── index<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">tsx</span> <span class="token" style="color:#808080">// the home page (which has access to the list of all blog posts)</span>
<span class="token" style="color:#a9b7c6">|</span>   ├── blog
<span class="token" style="color:#a9b7c6">|</span>       ├── <span class="token" style="color:#a9b7c6">[</span>blog<span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">md</span> <span class="token" style="color:#808080">// a template component that renders the blog posts under `/md/blog`</span>
├── md
<span class="token" style="color:#a9b7c6">|</span>   ├── blog
<span class="token" style="color:#a9b7c6">|</span>       ├── devii<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">md</span> <span class="token" style="color:#808080">// this page!</span>
        ├── whatever<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">md</span> <span class="token" style="color:#808080">// every MD file in this directory becomes a blog post</span>
├── components
<span class="token" style="color:#a9b7c6">|</span>   ├── <span class="token maybe-class-name">Code</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">tsx</span>
<span class="token" style="color:#a9b7c6">|</span>   ├── <span class="token maybe-class-name">Markdown</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">tsx</span>
<span class="token" style="color:#a9b7c6">|</span>   ├── <span class="token" style="color:#a9b7c6">&lt;</span>various others<span class="token" style="color:#a9b7c6">&gt;</span>
├── loader<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">ts</span> <span class="token" style="color:#808080">// contains utility functions for loading/parsing Markdown</span>
├── node_modules
├── tsconfig<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">json</span>
├── <span class="token" style="color:#cc7832">package</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">json</span>
├── next<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">config</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">js</span>
├── next<span class="token" style="color:#a9b7c6">-</span>env<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">d</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">ts</span>
├── <span class="token" style="color:#a9b7c6">.</span><span class="token property-access">gitignore</span></code></pre><h3>TypeScript + React</h3><p>Both React and TypeScript are baked into the DNA of Next.js, so you get these for free when you set up a Next.js project.</p><p>Gatsby, on the other hand, has a special plugin for TypeScript support, but it&#x27;s not officially supported and seems to be <a href="https://github.com/gatsbyjs/gatsby/issues/18983">low on their priority list</a>. Also, after messing with it for an hour I couldn&#x27;t get it to play nice with hot reload.</p><h3>Markdown authoring</h3><p>Using Next&#x27;s special <code>getStaticProps</code> hook and glorious <a href="https://nextjs.org/docs/advanced-features/dynamic-import#with-no-ssr">dynamic imports</a>, it&#x27;s trivial to a Markdown file and pass its contents into your React components as a prop. This achieves the holy grail I was searching for: the ability to easily mix React and Markdown.</p><h4>Frontmatter support</h4><p>Every Markdown file can include a &quot;frontmatter block&quot; containing metadata. I implemented a simple utility function (<code>loadPost</code>) that loads a Markdown file, parses its contents, and returns a TypeScript object with the following signature:</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc7832">type</span> <span class="token maybe-class-name">PostData</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#a9b7c6">{</span>
  path<span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#e8bf6a">string</span><span class="token" style="color:#a9b7c6">;</span> <span class="token" style="color:#808080">// the relative URL to this page, can be used as an href</span>
  content<span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#e8bf6a">string</span><span class="token" style="color:#a9b7c6">;</span> <span class="token" style="color:#808080">// the body of the MD file</span>
  title<span class="token" style="color:#a9b7c6">?</span><span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#e8bf6a">string</span><span class="token" style="color:#a9b7c6">;</span>
  subtitle<span class="token" style="color:#a9b7c6">?</span><span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#e8bf6a">string</span><span class="token" style="color:#a9b7c6">;</span>
  date<span class="token" style="color:#a9b7c6">?</span><span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#e8bf6a">number</span><span class="token" style="color:#a9b7c6">;</span>
  author<span class="token" style="color:#a9b7c6">?</span><span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#e8bf6a">string</span><span class="token" style="color:#a9b7c6">;</span>
  authorPhoto<span class="token" style="color:#a9b7c6">?</span><span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#e8bf6a">string</span><span class="token" style="color:#a9b7c6">;</span>
  authorTwitter<span class="token" style="color:#a9b7c6">?</span><span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#e8bf6a">string</span><span class="token" style="color:#a9b7c6">;</span>
  tags<span class="token" style="color:#a9b7c6">?</span><span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#e8bf6a">string</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">;</span>
  bannerPhoto<span class="token" style="color:#a9b7c6">?</span><span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#e8bf6a">string</span><span class="token" style="color:#a9b7c6">;</span>
  thumbnailPhoto<span class="token" style="color:#a9b7c6">?</span><span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#e8bf6a">string</span><span class="token" style="color:#a9b7c6">;</span>
<span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span></code></pre><p>I implemented a separate function <code>loadPosts</code> that loads <em>all</em> the Markdown files under <code>/md/blog</code> and returns them as an array (<code>PostData[]</code>). I use <code>loadPosts</code> on this site&#x27;s home page to render a list of all posts I&#x27;ve written.</p><h3>Medium-inspired design</h3><p>I used the wonderful <a href="https://github.com/rexxars/react-markdown"><code>react-markdown</code></a> package to render Markdown as a React component. My Markdown rendered component (<code>/components/Markdown.tsx</code>) provides some default styles inspired by Medium&#x27;s design. Just modify the <code>style</code> pros in <code>Markdown.tsx</code> to customize the design to your liking.</p><h3>GitHub-style code blocks</h3><p>You can easily drop code blocks into your blog posts using triple-backtick syntax. Specify the programming language with a &quot;language tag&quot;, <a href="https://help.github.com/en/github/writing-on-github/creating-and-highlighting-code-blocks">just like GitHub</a>!</p><p>To achieve this I implemented a custom <code>code</code> renderer (<code>/components/Code.tsx</code>) for <code>react-markdown</code> that uses <a href="https://github.com/conorhastings/react-syntax-highlighter#readme">react-syntax-highlighter</a> to handle the highlighting. So this:</p><div><pre>
```ts
// pretty neat huh?
const test = (arg: string) => {
  return arg.length > 5;
};
```</pre></div><p>turns into this:</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#808080">// pretty neat huh?</span>
<span class="token" style="color:#cc7832">const</span> <span class="token function-variable" style="color:#ffc66d">test</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#a9b7c6">(</span><span class="token parameter">arg<span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#e8bf6a">string</span></span><span class="token" style="color:#a9b7c6">)</span> <span class="token arrow" style="color:#a9b7c6">=&gt;</span> <span class="token" style="color:#a9b7c6">{</span>
  <span class="token" style="color:#cc7832">return</span> arg<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">length</span> <span class="token" style="color:#a9b7c6">&gt;</span> <span class="token" style="color:#6897bb">5</span><span class="token" style="color:#a9b7c6">;</span>
<span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span></code></pre><h3>RSS feed generation</h3><p>An RSS feed is auto-generated from your blog post feed. This feed is generated using the <code>rss</code> module (for converting JSON to RSS format) and <code>showdown</code> for converting the markdown files to RSS-compatible HTML. The feed is generated during the build step and written as a static file to <code>/rss.xml</code> in your static assets folder. It&#x27;s dead simple. That&#x27;s the joy of being able to easily write custom build scripts on top of Next.js&#x27;s <code>getStaticProps</code> hooks!</p><h3>SEO</h3><p>Every blog post page automatically populated meta tags based on the post metadata. This includes a <code>title</code> tag, <code>meta</code> tags, <code>og:</code> tags, Twitter metadata, and a <code>link</code> tag containing the canonical URL. You can modify/augment this in the <code>PostMeta.ts</code> component.</p><h3>Static generation</h3><p>You can generate a fully static version of your site using <code>yarn build &amp;&amp; yarn export</code>. This step is entirely powered by Next.js. The static site is exported to the <code>out</code> directory.</p><p>After its generated, use your static file hosting service of choice (Firebase Hosting, Vercel, Netlify) to deploy your site.</p><h3>Insanely customizable</h3><p>There&#x27;s nothing &quot;under the hood&quot; here. You can view and modify all the files that provide the functionality described above. dev.lwlx.xyz just provides a project scaffold, some Markdown-loading loading utilities (in <code>loader.ts</code>), and some sensible styling defaults (especially in <code>Markdown.tsx</code>).</p><p>To start customizing, modify <code>index.tsx</code> (the home page), <code>Essay.tsx</code> (the blog post template), and <code>Markdown.tsx</code> (the Markdown renderer).</p><h2>Get started</h2><p>Head to the GitHub repo to get started: <a href="https://github.com/Lawlez/dev.lwlx.xyz">https://github.com/Lawlez/dev.lwlx.xyz</a>. If you like this project, leave a ⭐️star⭐️ to help more people find dev.lwlx.xyz! 😎</p><p>To jump straight into the code, clone the repo and start the development server like so:</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">git clone git@github.com:vriad/devii.git mysite
cd mysite
yarn
yarn dev</code></pre></div></div></div></div><div style="flex:1" class="jsx-2179548495"></div><div style="top:0;width:100%;height:50px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;background-color:#4E5C63;color:white;padding:30px;font-size:12pt"><p>© Dominik (lwlx) Feger 2020</p><a href="/rss.xml"><img src="/rss-white.svg" alt="RSS Feed" height="30" width="30"/></a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"path":"blog/the-ultimate-tech-stack","title":"Choosing a tech stack for my personal dev blog in 2020","subtitle":null,"published":true,"datePublished":1590463136775,"tags":["Static Site Generators","React","Next.js"],"description":null,"canonicalUrl":"https://vriad.com/essays/devii","author":"Colin McDonnell","authorPhoto":"/profile.jpg","authorTwitter":"vriad","bannerPhoto":"/pancakes.jpeg","thumbnailPhoto":"/pancakes_thumb.jpeg","content":"\n\u003e Originally published at [https://vriad.com/essays/devii](https://vriad.com/essays/devii). Check out the HN \u003cdel\u003eroast\u003c/del\u003e discussion \u003ca href=\"https://news.ycombinator.com/item?id=23309002\"\u003ehere\u003c/a\u003e! 🤗\n\nI recently set out to build my personal website — the one you're reading now, as it happens!\n\nSurprisingly, it was much harder than expected to put together a \"tech stack\" that met my criteria. My criteria are pretty straightforward; I would expect most React devs to have a similar list. Yet it was surprisingly hard to put all these pieces together.\n\nGiven the lack of a decent out-of-the-box solution, I worry that many developers are settling for static-site generators that place limits on the interactivity and flexibility of your website. We can do better.\n\n\u003e Clone the repo here to get started with this setup: https://github.com/Lawlez/dev.lwlx.xyz\n\nLet's quickly run through my list of design goals:\n\n### React (+ TypeScript)\n\nI want to build the site with React and TypeScript. I love them both wholeheartedly, I use them for my day job, and they're gonna be around for a long time. Plus writing untyped JS makes me feel dirty.\n\nI don't want limitations on what my personal website can be/become. Sure, at present my site consists of two simple, static blog posts. But down the road, I may want to build a page that contains an interactive visualization, a filterable table, or a demo of a React component I'm open-sourcing. Even something simple (like the email newsletter signup form at the bottom of this page) was much more pleasant to implement in React; how did we use to build forms again?\n\nPlus: I want access to the npm ecosystem and all my favorite UI, animation, and styling libraries. I sincerely hope I never write another line of raw CSS ever again; CSS-in-JS 4 lyfe baby. If you want to start a Twitter feud with me about this, by all means [at me](https://twitter.com/vriad).\n\n### Good authoring experience\n\nIf it's obnoxious to write new blog posts, I won't do it. That's a regrettable law of the universe. Even writing blog posts with plain HTML — just a bunch of `\u003cp\u003e` tags in a div — is just annoying enough to bug me. The answer: Markdown of course!\n\nStatic site generators (SSGs) like Hugo and Jekyll provide an undeniably wonderful authoring experience. All you have to do is `touch` a new .md file in the proper directory and get to writing. Unfortunately all Markdown-based SSGs I know of are too restrictive. Mixing React and Markdown on the same page is either impossible or tricky. If it's possible, it likely requires some plugin/module/extension, config file, blob of boilerplate, or egregious hack. Sorry Hugo, I'm not going to re-write my React code using `React.createElement` like it's 2015.\n\nWell, that doesn't work for me. I want my website to be React-first, with a sprinkling of Markdown when it makes my life easier.\n\n### Static generation\n\nAs much as I love the Jamstack, it doesn't cut it from an SEO perspective. Many blogs powered by a \"headless CMS\" require two round trips before rendering the blog content (one to fetch the static JS bundle and another to fetch the blog content from a CMS). This degrades page load speeds and user experience, which accordingly degrades your rankings on Google.\n\nInstead I want every page of my site to be pre-rendered to a set of fully static assets, so I can deploy them to a CDN and get fast page loads everywhere. You could get the same benefits with server-side rendering, but that requires an actual server and worldwide load balancing to achieve comparable page load speeds. I love overengineering things as much as the next guy, even I have a line. 😅\n\n## My solution\n\nI describe my final architecture design below, along with my rationale for each choice. I distilled this setup into a website starter/boilerplate available here: https://github.com/Lawlez/dev.lwlx.xyz. Below, I allude to certain files/functions I implemented; to see the source code of these, just clone the repo `git clone git@github.com:vriad/devii.git`\n\n### Next.js\n\nI chose to build my site with Next.js. This won't be a surprising decision to anyone who's played with statically-rendered or server-side rendered React in recent years. Next.js is quickly eating everyone else's lunch in this market, especially Gatsby's (sorry Gatsby fans).\n\nNext.js is by far the most elegant way (for now) to do any static generation or server-side rendering with React. They just released their next-generation (pun intended) static site generator in the [9.3 release](https://nextjs.org/blog/next-9-3) back in March. So in the spirit of using technologies [in the spring of their life](https://www.youtube.com/watch?v=eBAX8MbRYFA), Next.js is a no-brainer.\n\nHere's a quick breakdown of the project structure. No need to understand every piece of it; but it may be useful to refer to throughout the rest of this post.\n\n```\n.\n├── README.md\n├── public // all static files (images, etc) go here\n├── pages // every .tsx component in this dir becomes a page of the final site\n|   ├── index.tsx // the home page (which has access to the list of all blog posts)\n|   ├── blog\n|       ├── [blog].md // a template component that renders the blog posts under `/md/blog`\n├── md\n|   ├── blog\n|       ├── devii.md // this page!\n        ├── whatever.md // every MD file in this directory becomes a blog post\n├── components\n|   ├── Code.tsx\n|   ├── Markdown.tsx\n|   ├── \u003cvarious others\u003e\n├── loader.ts // contains utility functions for loading/parsing Markdown\n├── node_modules\n├── tsconfig.json\n├── package.json\n├── next.config.js\n├── next-env.d.ts\n├── .gitignore\n```\n\n\u003c!-- Check out the Next.js documentation [here](https://nextjs.org/docs) to make sure it's the right choice for your project. --\u003e\n\n### TypeScript + React\n\nBoth React and TypeScript are baked into the DNA of Next.js, so you get these for free when you set up a Next.js project.\n\nGatsby, on the other hand, has a special plugin for TypeScript support, but it's not officially supported and seems to be [low on their priority list](https://github.com/gatsbyjs/gatsby/issues/18983). Also, after messing with it for an hour I couldn't get it to play nice with hot reload.\n\n### Markdown authoring\n\nUsing Next's special `getStaticProps` hook and glorious [dynamic imports](https://nextjs.org/docs/advanced-features/dynamic-import#with-no-ssr), it's trivial to a Markdown file and pass its contents into your React components as a prop. This achieves the holy grail I was searching for: the ability to easily mix React and Markdown.\n\n#### Frontmatter support\n\nEvery Markdown file can include a \"frontmatter block\" containing metadata. I implemented a simple utility function (`loadPost`) that loads a Markdown file, parses its contents, and returns a TypeScript object with the following signature:\n\n```ts\ntype PostData = {\n  path: string; // the relative URL to this page, can be used as an href\n  content: string; // the body of the MD file\n  title?: string;\n  subtitle?: string;\n  date?: number;\n  author?: string;\n  authorPhoto?: string;\n  authorTwitter?: string;\n  tags?: string[];\n  bannerPhoto?: string;\n  thumbnailPhoto?: string;\n};\n```\n\nI implemented a separate function `loadPosts` that loads _all_ the Markdown files under `/md/blog` and returns them as an array (`PostData[]`). I use `loadPosts` on this site's home page to render a list of all posts I've written.\n\n### Medium-inspired design\n\nI used the wonderful [`react-markdown`](https://github.com/rexxars/react-markdown) package to render Markdown as a React component. My Markdown rendered component (`/components/Markdown.tsx`) provides some default styles inspired by Medium's design. Just modify the `style` pros in `Markdown.tsx` to customize the design to your liking.\n\n### GitHub-style code blocks\n\nYou can easily drop code blocks into your blog posts using triple-backtick syntax. Specify the programming language with a \"language tag\", [just like GitHub](https://help.github.com/en/github/writing-on-github/creating-and-highlighting-code-blocks)!\n\nTo achieve this I implemented a custom `code` renderer (`/components/Code.tsx`) for `react-markdown` that uses [react-syntax-highlighter](https://github.com/conorhastings/react-syntax-highlighter#readme) to handle the highlighting. So this:\n\n\u003c!-- I landed on this solution after wasting hours playing with other options. CodeMirror has bad React support (the only React wrapper for it is inauspiciously named `react-codemirror2`) and [bizarre selection issues](https://github.com/codemirror/CodeMirror/issues/1099) for `readonly` code blocks. The popular `highlight.js` project requires you to [initialize the library](https://github.com/highlightjs/highlight.js/issues/925) in `componentDidMount` like its 2015 :/  --\u003e\n\n\u003cpre\u003e\n```ts\n// pretty neat huh?\nconst test = (arg: string) =\u003e {\n  return arg.length \u003e 5;\n};\n```\u003c/pre\u003e\n\nturns into this:\n\n```ts\n// pretty neat huh?\nconst test = (arg: string) =\u003e {\n  return arg.length \u003e 5;\n};\n```\n\n### RSS feed generation\n\nAn RSS feed is auto-generated from your blog post feed. This feed is generated using the `rss` module (for converting JSON to RSS format) and `showdown` for converting the markdown files to RSS-compatible HTML. The feed is generated during the build step and written as a static file to `/rss.xml` in your static assets folder. It's dead simple. That's the joy of being able to easily write custom build scripts on top of Next.js's `getStaticProps` hooks!\n\n### SEO\n\nEvery blog post page automatically populated meta tags based on the post metadata. This includes a `title` tag, `meta` tags, `og:` tags, Twitter metadata, and a `link` tag containing the canonical URL. You can modify/augment this in the `PostMeta.ts` component.\n\n### Static generation\n\nYou can generate a fully static version of your site using `yarn build \u0026\u0026 yarn export`. This step is entirely powered by Next.js. The static site is exported to the `out` directory.\n\nAfter its generated, use your static file hosting service of choice (Firebase Hosting, Vercel, Netlify) to deploy your site.\n\n### Insanely customizable\n\nThere's nothing \"under the hood\" here. You can view and modify all the files that provide the functionality described above. dev.lwlx.xyz just provides a project scaffold, some Markdown-loading loading utilities (in `loader.ts`), and some sensible styling defaults (especially in `Markdown.tsx`).\n\nTo start customizing, modify `index.tsx` (the home page), `Essay.tsx` (the blog post template), and `Markdown.tsx` (the Markdown renderer).\n\n## Get started\n\nHead to the GitHub repo to get started: [https://github.com/Lawlez/dev.lwlx.xyz](https://github.com/Lawlez/dev.lwlx.xyz). If you like this project, leave a ⭐️star⭐️ to help more people find dev.lwlx.xyz! 😎\n\nTo jump straight into the code, clone the repo and start the development server like so:\n\n```sh\ngit clone git@github.com:vriad/devii.git mysite\ncd mysite\nyarn\nyarn dev\n```\n"}},"__N_SSG":true},"page":"/blog/[blog]","query":{"blog":"the-ultimate-tech-stack"},"buildId":"I47eIwkdHKsKDoJLQJLEX","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-fa276ba060a4a8ac7eef.js"></script><script src="/_next/static/chunks/main-7574b5f2560487b662c2.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.4cb66147a9c8c0fd8872.js" async=""></script><script src="/_next/static/chunks/ac5da378b4ecd4a38d3f62a9e50ea23347a0e932.b1e9d5f6f84b74cfdc79.js" async=""></script><script src="/_next/static/chunks/f6078781a05fe1bcb0902d23dbbb2662c8d200b3.4f74c9488847d06a0cf9.js" async=""></script><script src="/_next/static/chunks/pages/_app-1961519019159f928e8c.js" async=""></script><script src="/_next/static/chunks/c1dbd67d6d9c688ae4d7fa2d396d98e2a73eef47.12c1b7bd805dd74f5963.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bblog%5D-a06e06ab2fd3f06709f2.js" async=""></script><script src="/_next/static/I47eIwkdHKsKDoJLQJLEX/_buildManifest.js" async=""></script><script src="/_next/static/I47eIwkdHKsKDoJLQJLEX/_ssgManifest.js" async=""></script></body></html>